<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Registration</title>
    <link href="register-style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Dancing+Script&display=swap" rel="stylesheet">
    <script>
        //worked with partner Alyssa and classmates
        //returns a URLSearchParams object allowing access to the GET decoded query arguments contained in the URL
        let params = (new URL(document.location)).searchParams;
        //displays errors when page is loaded
        window.onload = function () {

            //if there is an error in the URL query string then it will show what the errors are and where
            if (params.has("RegFullnameError")) {

                //defining variable names
                regError = params.get("RegFullnameError"); //get the errors from the query string
                nameisLong = '<font color="red">full name must be 30 characherts or less </font>';  //assigns this error message as the nameLong variable
                nameMustLetter = '<font color="red">name must be letters only </font>'; //assigns this error message as the nameNoLetter variable

                //if name is too long, will display error message
                if (regError == nameisLong) {
                    document.getElementById("regfullname").innerHTML = regError; //sets the inner html to display the error
                }
                //if name consists of anything other than characters it will display error message
                if (regError == nameMustLetter) {
                    document.getElementById("regfullname").innerHTML = regError; //sets the inner html to display the error
                }

                //if there is an error in the URL query string then it will show what the errors are and where
                if (params.has("RegPasswordError")) {

                    //defining variable names
                    regError2 = params.get("RegPasswordError"); //get the errors from the query string
                    passNoMatch = '<font color="red">password does not match</font>'; //assigns this error message as the passNoMatch variable
                    passLength = '<font color="red">Password must be more than 6 characters long</font>'; //assigns this error message as the passLength variable

                    //if password is less than 6 characters it will display this error
                    if (regError2 == passLength) {
                        document.getElementById("regpassword").innerHTML = regError2; //sets the inner html to display the error
                    }
                    //if password and repeat password do not match it will display this error
                    if (regError2 == passNoMatch) {
                        document.getElementById("regrepeatpassword").innerHTML = regError2; //sets the inner html to display the error
                    }
                }
                //if there is an error in the URL query string then it will show what the errors are and where
                if (params.has("RegUsernameError")) {

                    //defining variable names
                    regError3 = params.get("RegUsernameError"); //get the errors from the query string
                    useNumLet = '<font color="red">Username must be characters and numbers only</font>'; //assigns this error message to the useNumLet variable 
                    usernameIsLong = '<font color="red">Username is too long</font>'; //assigns this error message to this usernameIsLong variable
                    usernameIsShort = '<font color="red">username is too short</font>'; //assigns this error message to this useShort variable
                    usernameIsTaken = '<font color="red">user already registered</font>'; //assigns this error message to this useTaken variable

                    //if username contains special characters (anything other than letters and numbers) then it will display the error message 'username must be characters and numbers only'
                    if (regError3 == useNumLet) {
                        document.getElementById("regusername").innerHTML = regError3; //sets the inner html to display the error
                    }
                    //if username is longer than 10 characters it will display the message 'username is too long'
                    if (regError3 == usernameIsLong) {
                        document.getElementById("regusername").innerHTML = regError3; //sets the inner html to display the error
                    }
                    //if username is less than 4 characters it will display the message 'username is too short
                    if (regError3 == usernameIsShort) {
                        document.getElementById("regusername").innerHTML = regError3; //sets the inner html to display the error
                    }
                    //if username has already been registered it will display the message 'user already registered'
                    if (regError3 == usernameIsTaken) {
                        document.getElementById("regusername").innerHTML = regError3; //sets the inner html to display the error
                    }
                }
                //if there is an error in the URL query string then it will show what the errors are and where
                if (params.has("RegEmailError")) {

                    //defining variable names
                    regError4 = params.get("RegEmailError"); //get the errors from the query string
                    emailInvalid = '<font color="red">Email is invalid</font>'; //assigns this error message to the emailInvalid variable

                    //if email format is incorect it will display the message 'email is invalid'
                    if (regError4 == emailInvalid) {
                        document.getElementById("regemail").innerHTML = regError4; //sets the inner html to display the error
                    }
                }
                if (params.has("stickRegFullname")) { //if has stickMe from query
                    showRegFullname = params.get("stickRegFullname"); //get the info from the query and store into variable
                    document.getElementById("regfullnamebox").value = showRegFullname; //sets the value to the inoput of the useer
                }
                if (params.has("stickUsername")) { //if has stickMe from query
                    showUsername = params.get("stickUsername"); //get the info from the query and store into variable
                    document.getElementById("regusernamebox").value = showUsername; //sets the value to the input of the user
                }
                if (params.has("stickEmail")) { //if has stickEmail
                    showEmail = params.get("stickEmail"); //get the info from the query and store into variable
                    document.getElementById("regemailbox").value = showEmail; //set the value to the input of the user
                }
            }
        }
    </script>

</head>

<header>
    <div id="top">
        <br>
        <br>
        <br>
        <br>
        <br>
        <img class="invoiceimage" src='./images/index.jpg' height="10%" width="10%">
        <h1>Kiara's Clothing Store </h1>
        <h2>
            New Customers Please Sign Up:
        </h2>
    </div>
</header>

<body>
    <div>
        <main>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <form method="POST" id="register_form" name="registration_form">
                <input type="text" id="regfullnamebox" name="fullname" size="40" placeholder="enter full name" value="">
                <label id="regfullname" class="">fullname</label><br />
                <input type="text" id="regusernamebox" name="username" size="40" placeholder="enter username" value="">
                <label id="regusername" class="">username</label><br />
                <input type="password" id="reguserbox" name="password" size="40" placeholder="enter password" value="">
                <label id="regpassword" class="">password</label><br />
                <input type="password" id="reguserbox" name="repeat_password" size="40"
                    placeholder="enter password again" value="">
                <label id="regrepeatpassword" class="">repeat password</label><br />
                <input type="email" id="regemailbox" name="email" size="40" placeholder="enter email" value="">
                <label id="regemail" class="">email</label><br />
                <br>
                <input type="submit" value="register" id="submit">
                <style>
                    input[type=submit] {
                        background-color: whitesmoke;
                        border: solid black 0.2px;
                        color: black;
                        padding: 16px 32px;
                        text-decoration: none;
                        margin: 4px 2px;
                        cursor: pointer;
                    }
                </style>


                <br>
                <h2>You're one step away from cute clothes! </h2>

        </main>
    </div>
    </form>

</body>


<script>
    //Sets link with quantity data to pass to next page
    register_form.action = "/register" + document.location.search;
</script>

</html>